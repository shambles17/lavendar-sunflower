<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>A Fun Birthday Quiz!</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Fredoka+One&family=Inter:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .font-fredoka {
            font-family: 'Fredoka One', cursive;
        }
        @keyframes gradient-animation {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        .animated-gradient {
            background: linear-gradient(-45deg, #a78bfa, #f472b6, #fb923c, #facc15);
            background-size: 400% 400%;
            animation: gradient-animation 15s ease infinite;
        }
        .quiz-option:hover:not(:disabled) {
            transform: scale(1.05);
            background-color: #fde047;
        }
        .correct {
            background-color: #4ade80 !important;
            color: white !important;
        }
        /* Custom modal styles */
        .modal-overlay {
            transition: opacity 0.3s ease;
        }
        .modal-box {
            transition: transform 0.3s ease, opacity 0.3s ease;
        }
        /* For the moving button */
        #answers {
            position: relative;
            min-height: 120px; /* Ensure container has height for button to move in */
        }
        .moving-button {
            position: absolute;
            transition: top 0.3s ease-out, left 0.3s ease-out;
        }
    </style>
</head>
<body class="animated-gradient text-white min-h-screen flex items-center justify-center p-4">

    <div id="quiz-container" class="w-full max-w-2xl mx-auto bg-white/20 backdrop-blur-lg rounded-2xl shadow-2xl p-8 text-center">
        <div id="quiz-content">
            <h2 id="question" class="font-fredoka text-3xl md:text-4xl text-white mb-8 drop-shadow-md">Quiz Question Here</h2>
            <div id="answers" class="grid grid-cols-1 md:grid-cols-2 gap-4">
                </div>
            <div id="action-buttons" class="mt-6 flex justify-center gap-4">
                 </div>
        </div>
        <div id="result-container" class="hidden">
             <h2 class="font-fredoka text-4xl md:text-5xl text-white mb-4 drop-shadow-md">Quiz Complete!</h2>
             <p id="score" class="text-white/90 text-2xl mb-8"></p>
             <button id="redirect-btn" class="font-bold bg-yellow-400 text-purple-800 px-8 py-3 rounded-xl shadow-lg hover:bg-yellow-300 transform hover:scale-105 transition-transform duration-300">
                 click it
             </button>
        </div>
    </div>
    
    <div id="wrong-answer-modal" class="modal-overlay fixed inset-0 bg-black/60 flex items-center justify-center p-4 z-50 opacity-0 pointer-events-none">
        <div class="modal-box bg-white rounded-2xl shadow-2xl p-8 text-center max-w-sm w-full text-gray-800 transform scale-95 opacity-0">
            <h3 class="font-fredoka text-2xl text-red-500 mb-4">Oops!</h3>
            <p class="mb-6">Galat option tick maaraa aapne aunty jiiii</p>
            <button class="modal-close-btn font-bold bg-red-500 text-white px-8 py-3 rounded-xl shadow-lg hover:bg-red-600 transform hover:scale-105 transition-transform duration-300">
                Try Again
            </button>
        </div>
    </div>

    <div id="skip-warning-modal" class="modal-overlay fixed inset-0 bg-black/60 flex items-center justify-center p-4 z-50 opacity-0 pointer-events-none">
        <div class="modal-box bg-white rounded-2xl shadow-2xl p-8 text-center max-w-sm w-full text-gray-800 transform scale-95 opacity-0">
            <h3 class="font-fredoka text-2xl text-yellow-500 mb-4">Hey!</h3>
            <p class="mb-6">Aeeee chiii chiiiiii shrm nhi aati tujhe</p>
            <button class="modal-close-btn font-bold bg-yellow-500 text-white px-8 py-3 rounded-xl shadow-lg hover:bg-yellow-600 transform hover:scale-105 transition-transform duration-300">
                OK...
            </button>
        </div>
    </div>


    <script>
        const quizData = [
            {
                question: "what is your age now ?",
                image: "cobbler.gif",
                answers: ["10", "22", "17", "80"],
                correct: "80"
            },
            {
                question: "What is 10 + 10?",
                image: "tenor.gif",
                answers: ["20", "96", "8", "100"],
                correct: "20"
            },
            {
                question: "Do u find me attractive?",
                image: "Smirk.gif",
                answers: ["Yes", "No"],
                correct: "Yes",
                isSpecial: true // Flag for the final question
            }
        ];

        const quizContent = document.getElementById('quiz-content');
        const resultContainer = document.getElementById('result-container');
        const questionEl = document.getElementById('question');
        const answersEl = document.getElementById('answers');
        const actionButtonsEl = document.getElementById('action-buttons');
        const scoreEl = document.getElementById('score');
        const redirectBtn = document.getElementById('redirect-btn');
        
        const wrongAnswerModal = document.getElementById('wrong-answer-modal');
        const skipWarningModal = document.getElementById('skip-warning-modal');
        const allModals = document.querySelectorAll('.modal-overlay');

        let currentQuiz = 0;
        let score = 0;

        loadQuiz();

        function loadQuiz() {
            const existingImage = document.getElementById('question-image');
            if (existingImage) existingImage.remove();

            const currentQuizData = quizData[currentQuiz];
            
            answersEl.className = 'grid grid-cols-1 md:grid-cols-2 gap-4';

            if (currentQuizData.image) {
                const img = document.createElement('img');
                img.id = 'question-image';
                img.src = currentQuizData.image;
                img.alt = "Quiz Image";
                img.classList.add('mx-auto', 'mb-6', 'rounded-xl', 'shadow-lg', 'max-h-48');
                questionEl.before(img);
            }

            questionEl.innerText = currentQuizData.question;
            answersEl.innerHTML = '';
            actionButtonsEl.innerHTML = '';
            
            if (currentQuizData.isSpecial) {
                setupSpecialQuestion(currentQuizData);
            } else {
                setupStandardQuestion(currentQuizData);
            }
        }

        function setupStandardQuestion(data) {
             data.answers.forEach(answerText => {
                const button = createButton(answerText, () => selectAnswer(button, answerText, data.correct));
                answersEl.appendChild(button);
            });
            const skipButton = createActionButton('Skip', skipQuestion);
            actionButtonsEl.appendChild(skipButton);
        }
        
        // --- FIXED SECTION ---
        function setupSpecialQuestion(data) {
            answersEl.className = 'grid grid-cols-2 gap-4';
            const yesButton = createButton('Yes', handleYesClick);
            const noButton = createButton('No');

            yesButton.classList.add('justify-self-end');
            noButton.classList.add('justify-self-start');

            [yesButton, noButton].forEach(button => {
                button.classList.remove('w-full', 'p-4');
                button.classList.add('w-auto', 'px-10', 'py-2');
            });
            
            function activateAndMoveNoButton(event) {
                const currentNoButton = event.target;
                if (!currentNoButton.classList.contains('moving-button')) {
                    currentNoButton.classList.add('moving-button');
                }
                moveButtonRandomly(currentNoButton, yesButton);
            }

            noButton.addEventListener('mouseover', activateAndMoveNoButton);
            noButton.addEventListener('click', activateAndMoveNoButton);

            answersEl.appendChild(yesButton);
            answersEl.appendChild(noButton);
            
            const skipButton = createActionButton('Skip', () => showModal(skipWarningModal));
            actionButtonsEl.appendChild(skipButton);
        }

        function moveButtonRandomly(noButton, yesButton) {
            const container = answersEl;
            const containerRect = container.getBoundingClientRect();
            const noButtonRect = noButton.getBoundingClientRect();
            const yesButtonRect = yesButton.getBoundingClientRect();

            // Position of the 'Yes' button relative to the container
            const yesRelativeLeft = yesButtonRect.left - containerRect.left;
            const yesRelativeTop = yesButtonRect.top - containerRect.top;

            const maxX = containerRect.width - noButtonRect.width;
            const maxY = containerRect.height - noButtonRect.height;
            
            let randomX, randomY;
            let isOverlapping = false;
            let attempts = 0;
            const maxAttempts = 50; // Prevents infinite loops

            do {
                randomX = Math.random() * maxX;
                randomY = Math.random() * maxY;

                // Check for collision
                isOverlapping = (
                    randomX < yesRelativeLeft + yesButtonRect.width &&
                    randomX + noButtonRect.width > yesRelativeLeft &&
                    randomY < yesRelativeTop + yesButtonRect.height &&
                    randomY + noButtonRect.height > yesRelativeTop
                );
                attempts++;
            } while (isOverlapping && attempts < maxAttempts);
            
            noButton.style.left = `${randomX}px`;
            noButton.style.top = `${randomY}px`;
        }
        // --- END OF FIXED SECTION ---

        function handleYesClick() {
            score++;
            quizContent.innerHTML = `
                <img src="Shinchan blushing.gif" alt="Blushing" class="mx-auto mb-6 rounded-xl shadow-lg max-h-64">
                <button id="submit-btn" class="font-bold bg-pink-500 text-white px-8 py-3 rounded-xl shadow-lg hover:bg-pink-600 transform hover:scale-105 transition-transform duration-300">
                    Submit Quiz
                </button>
            `;
            document.getElementById('submit-btn').addEventListener('click', showResults);
        }
        
        function selectAnswer(button, selectedAnswer, correctAnswer) {
            if (selectedAnswer === correctAnswer) {
                score++;
                button.classList.add('correct');
                answersEl.querySelectorAll('button').forEach(btn => btn.disabled = true);
                
                actionButtonsEl.innerHTML = '';
                const nextButton = createActionButton('Next Question →', nextQuestion, ['bg-green-500', 'hover:bg-green-600']);
                actionButtonsEl.appendChild(nextButton);
            } else {
                showModal(wrongAnswerModal);
            }
        }
        
        function nextQuestion() {
            currentQuiz++;
            if (currentQuiz < quizData.length) {
                loadQuiz();
            } else {
                showResults();
            }
        }

        function skipQuestion() {
            nextQuestion();
        }

        function showResults() {
            quizContent.classList.add('hidden');
            resultContainer.classList.remove('hidden');
            scoreEl.innerText = `You scored ${score} out of ${quizData.length}!`;
        }
        
        function createButton(text, onClick) {
            const button = document.createElement('button');
            button.innerText = text;
            button.classList.add('w-full', 'font-bold', 'bg-white/30', 'text-white', 'p-4', 'rounded-xl', 'shadow-lg', 'transition-transform', 'duration-300', 'quiz-option');
            if(onClick) button.addEventListener('click', onClick);
            return button;
        }

        function createActionButton(text, onClick, extraClasses = []) {
            const button = document.createElement('button');
            button.innerText = text;
            button.classList.add('font-bold', 'text-white', 'px-8', 'py-3', 'rounded-xl', 'shadow-lg', 'transform', 'hover:scale-105', 'transition-transform', 'duration-300', ...extraClasses);
            if(extraClasses.length === 0) button.classList.add('bg-white/20', 'hover:bg-white/30');
            button.addEventListener('click', onClick);
            return button;
        }

        function showModal(modal) {
            const modalBox = modal.querySelector('.modal-box');
            modal.classList.remove('opacity-0', 'pointer-events-none');
            modalBox.classList.remove('opacity-0', 'scale-95');
        }
        
        function hideModal(modal) {
            const modalBox = modal.querySelector('.modal-box');
            modal.classList.add('opacity-0');
            modalBox.classList.add('opacity-0', 'scale-95');
            setTimeout(() => modal.classList.add('pointer-events-none'), 300);
        }

        redirectBtn.addEventListener('click', () => {
            window.location.href = 'last_piece.html';
        });
        
        allModals.forEach(modal => {
            modal.querySelector('.modal-close-btn').addEventListener('click', () => hideModal(modal));
        });

    </script>
</body>
</html>